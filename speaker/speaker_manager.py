from coqpit import Coqpit

VCTK_speaker_names = [
    'VCTK_p225',
    'VCTK_p226',
    'VCTK_p227',
    'VCTK_p228',
    'VCTK_p229',
    'VCTK_p230',
    'VCTK_p231',
    'VCTK_p232',
    'VCTK_p233',
    'VCTK_p234',
    'VCTK_p236',
    'VCTK_p237',
    'VCTK_p238',
    'VCTK_p239',
    'VCTK_p240',
    'VCTK_p241',
    'VCTK_p243',
    'VCTK_p244',
    'VCTK_p245',
    'VCTK_p246',
    'VCTK_p247',
    'VCTK_p248',
    'VCTK_p249',
    'VCTK_p250',
    'VCTK_p251',
    'VCTK_p252',
    'VCTK_p253',
    'VCTK_p254',
    'VCTK_p255',
    'VCTK_p256',
    'VCTK_p257',
    'VCTK_p258',
    'VCTK_p259',
    'VCTK_p260',
    'VCTK_p261',
    'VCTK_p262',
    'VCTK_p263',
    'VCTK_p264',
    'VCTK_p265',
    'VCTK_p266',
    'VCTK_p267',
    'VCTK_p268',
    'VCTK_p269',
    'VCTK_p270',
    'VCTK_p271',
    'VCTK_p272',
    'VCTK_p273',
    'VCTK_p274',
    'VCTK_p275',
    'VCTK_p276',
    'VCTK_p277',
    'VCTK_p278',
    'VCTK_p279',
    'VCTK_p280',
    'VCTK_p281',
    'VCTK_p282',
    'VCTK_p283',
    'VCTK_p284',
    'VCTK_p285',
    'VCTK_p286',
    'VCTK_p287',
    'VCTK_p288',
    'VCTK_p292',
    'VCTK_p293',
    'VCTK_p294',
    'VCTK_p295',
    'VCTK_p297',
    'VCTK_p298',
    'VCTK_p299',
    'VCTK_p300',
    'VCTK_p301',
    'VCTK_p302',
    'VCTK_p303',
    'VCTK_p304',
    'VCTK_p305',
    'VCTK_p306',
    'VCTK_p307',
    'VCTK_p308',
    'VCTK_p310',
    'VCTK_p311',
    'VCTK_p312',
    'VCTK_p313',
    'VCTK_p314',
    'VCTK_p316',
    'VCTK_p317',
    'VCTK_p318',
    'VCTK_p323',
    'VCTK_p326',
    'VCTK_p329',
    'VCTK_p330',
    'VCTK_p333',
    'VCTK_p334',
    'VCTK_p335',
    'VCTK_p336',
    'VCTK_p339',
    'VCTK_p340',
    'VCTK_p341',
    'VCTK_p343',
    'VCTK_p345',
    'VCTK_p347',
    'VCTK_p351',
    'VCTK_p360',
    'VCTK_p361',
    'VCTK_p362',
    'VCTK_p363',
    'VCTK_p364',
    'VCTK_p374',
    'VCTK_p376',
    'VCTK_s5'
]

LibriTTS_speaker_names = [
    'libritts_19',
    'libritts_26',
    'libritts_27',
    'libritts_32',
    'libritts_39',
    'libritts_40',
    'libritts_60',
    'libritts_78',
    'libritts_83',
    'libritts_87',
    'libritts_89',
    'libritts_103',
    'libritts_118',
    'libritts_125',
    'libritts_150',
    'libritts_163',
    'libritts_196',
    'libritts_198',
    'libritts_200',
    'libritts_201',
    'libritts_211',
    'libritts_226',
    'libritts_229',
    'libritts_233',
    'libritts_248',
    'libritts_250',
    'libritts_254',
    'libritts_289',
    'libritts_298',
    'libritts_302',
    'libritts_311',
    'libritts_332',
    'libritts_374',
    'libritts_403',
    'libritts_405',
    'libritts_412',
    'libritts_426',
    'libritts_446',
    'libritts_458',
    'libritts_460',
    'libritts_481',
    'libritts_587',
    'libritts_625',
    'libritts_669',
    'libritts_696',
    'libritts_730',
    'libritts_831',
    'libritts_839',
    'libritts_887',
    'libritts_909',
    'libritts_911',
    'libritts_1034',
    'libritts_1040',
    'libritts_1069',
    'libritts_1081',
    'libritts_1088',
    'libritts_1098',
    'libritts_1116',
    'libritts_1183',
    'libritts_1235',
    'libritts_1246',
    'libritts_1263',
    'libritts_1334',
    'libritts_1355',
    'libritts_1363',
    'libritts_1447',
    'libritts_1455',
    'libritts_1502',
    'libritts_1553',
    'libritts_1578',
    'libritts_1594',
    'libritts_1624',
    'libritts_1737',
    'libritts_1743',
    'libritts_1841',
    'libritts_1867',
    'libritts_1898',
    'libritts_1926',
    'libritts_1963',
    'libritts_1970',
    'libritts_1992',
    'libritts_2002',
    'libritts_2007',
    'libritts_2092',
    'libritts_2136',
    'libritts_2159',
    'libritts_2182',
    'libritts_2196',
    'libritts_2289',
    'libritts_2384',
    'libritts_2391',
    'libritts_2416',
    'libritts_2436',
    'libritts_2514',
    'libritts_2518',
    'libritts_2691',
    'libritts_2764',
    'libritts_2817',
    'libritts_2836',
    'libritts_2843',
    'libritts_2893',
    'libritts_2910',
    'libritts_2911',
    'libritts_2952',
    'libritts_2989',
    'libritts_3112',
    'libritts_3168',
    'libritts_3214',
    'libritts_3235',
    'libritts_3240',
    'libritts_3242',
    'libritts_3259',
    'libritts_3374',
    'libritts_3436',
    'libritts_3440',
    'libritts_3486',
    'libritts_3526',
    'libritts_3607',
    'libritts_3664',
    'libritts_3699',
    'libritts_3723',
    'libritts_3807',
    'libritts_3830',
    'libritts_3857',
    'libritts_3879',
    'libritts_3947',
    'libritts_3982',
    'libritts_3983',
    'libritts_4014',
    'libritts_4018',
    'libritts_4051',
    'libritts_4088',
    'libritts_4137',
    'libritts_4160',
    'libritts_4195',
    'libritts_4214',
    'libritts_4267',
    'libritts_4297',
    'libritts_4340',
    'libritts_4362',
    'libritts_4397',
    'libritts_4406',
    'libritts_4441',
    'libritts_4481',
    'libritts_4640',
    'libritts_4680',
    'libritts_4788',
    'libritts_4813',
    'libritts_4830',
    'libritts_4853',
    'libritts_4859',
    'libritts_4898',
    'libritts_5022',
    'libritts_5049',
    'libritts_5104',
    'libritts_5163',
    'libritts_5322',
    'libritts_5339',
    'libritts_5390',
    'libritts_5393',
    'libritts_5456',
    'libritts_5463',
    'libritts_5514',
    'libritts_5561',
    'libritts_5652',
    'libritts_5678',
    'libritts_5703',
    'libritts_5750',
    'libritts_5778',
    'libritts_5789',
    'libritts_5808',
    'libritts_5867',
    'libritts_6000',
    'libritts_6019',
    'libritts_6064',
    'libritts_6078',
    'libritts_6081',
    'libritts_6147',
    'libritts_6181',
    'libritts_6209',
    'libritts_6272',
    'libritts_6367',
    'libritts_6385',
    'libritts_6415',
    'libritts_6437',
    'libritts_6454',
    'libritts_6476',
    'libritts_6529',
    'libritts_6531',
    'libritts_6563',
    'libritts_6818',
    'libritts_6836',
    'libritts_6848',
    'libritts_6880',
    'libritts_6925',
    'libritts_7059',
    'libritts_7067',
    'libritts_7078',
    'libritts_7113',
    'libritts_7148',
    'libritts_7178',
    'libritts_7190',
    'libritts_7226',
    'libritts_7264',
    'libritts_7278',
    'libritts_7302',
    'libritts_7312',
    'libritts_7367',
    'libritts_7402',
    'libritts_7447',
    'libritts_7505',
    'libritts_7511',
    'libritts_7517',
    'libritts_7635',
    'libritts_7780',
    'libritts_7794',
    'libritts_7800',
    'libritts_7859',
    'libritts_8014',
    'libritts_8051',
    'libritts_8063',
    'libritts_8088',
    'libritts_8095',
    'libritts_8098',
    'libritts_8108',
    'libritts_8123',
    'libritts_8226',
    'libritts_8238',
    'libritts_8312',
    'libritts_8324',
    'libritts_8419',
    'libritts_8425',
    'libritts_8465',
    'libritts_8468',
    'libritts_8580',
    'libritts_8609',
    'libritts_8629',
    'libritts_8630',
    'libritts_8747',
    'libritts_8770',
    'libritts_8797',
    'libritts_8838',
    'libritts_8975'
]

CMLPT_speaker_names = [
    'cmlpt_10107',
    'cmlpt_10199',
    'cmlpt_10670',
    'cmlpt_12249',
    'cmlpt_12865',
    'cmlpt_2959',
    'cmlpt_2961',
    'cmlpt_3369',
    'cmlpt_3427',
    'cmlpt_3814',
    'cmlpt_3976',
    'cmlpt_4367',
    'cmlpt_4778',
    'cmlpt_4783',
    'cmlpt_4801',
    'cmlpt_5025',
    'cmlpt_5068',
    'cmlpt_5103',
    'cmlpt_5677',
    'cmlpt_5705',
    'cmlpt_5888',
    'cmlpt_6207',
    'cmlpt_6581',
    'cmlpt_6601',
    'cmlpt_6700',
    'cmlpt_7028',
    'cmlpt_8680',
    'cmlpt_9217',
    'cmlpt_9351',
    'cmlpt_9485'
]

BAKER_speaker_names = [
    'baker'
]

KOKORO_speaker_names = [
    'kokoro'
]

LJS_speaker_names = [
    'ljspeech'
]

AISHELL_speaker_names = [
    'aishell_0005',
    'aishell_0009',
    'aishell_0011',
    'aishell_0012',
    'aishell_0016',
    'aishell_0018',
    'aishell_0033',
    'aishell_0038',
    'aishell_0043',
    'aishell_0057',
    'aishell_0073',
    'aishell_0080',
    'aishell_0112',
    'aishell_0122',
    'aishell_0133',
    'aishell_0139',
    'aishell_0145',
    'aishell_0149',
    'aishell_0193',
    'aishell_0197',
    'aishell_0200',
    'aishell_0241',
    'aishell_0246',
    'aishell_0261',
    'aishell_0267',
    'aishell_0273',
    'aishell_0287',
    'aishell_0288',
    'aishell_0299',
    'aishell_0307',
    'aishell_0309',
    'aishell_0315',
    'aishell_0316',
    'aishell_0323',
    'aishell_0338',
    'aishell_0339',
    'aishell_0341',
    'aishell_0342',
    'aishell_0354',
    'aishell_0366',
    'aishell_0375',
    'aishell_0379',
    'aishell_0380',
    'aishell_0382',
    'aishell_0385',
    'aishell_0393',
    'aishell_0394',
    'aishell_0395',
    'aishell_0407',
    'aishell_0415',
    'aishell_0426',
    'aishell_0427',
    'aishell_0434',
    'aishell_0435',
    'aishell_0470',
    'aishell_0482',
    'aishell_0502',
    'aishell_0534',
    'aishell_0535',
    'aishell_0539',
    'aishell_0544',
    'aishell_0565',
    'aishell_0570',
    'aishell_0578',
    'aishell_0588',
    'aishell_0590',
    'aishell_0594',
    'aishell_0599',
    'aishell_0601',
    'aishell_0603',
    'aishell_0606',
    'aishell_0607',
    'aishell_0609',
    'aishell_0614',
    'aishell_0623',
    'aishell_0629',
    'aishell_0631',
    'aishell_0632',
    'aishell_0666',
    'aishell_0668',
    'aishell_0671',
    'aishell_0686',
    'aishell_0700',
    'aishell_0710',
    'aishell_0720',
    'aishell_0723',
    'aishell_0737',
    'aishell_0746',
    'aishell_0748',
    'aishell_0751',
    'aishell_0758',
    'aishell_0760',
    'aishell_0762',
    'aishell_0778',
    'aishell_0780',
    'aishell_0784',
    'aishell_0786',
    'aishell_0794',
    'aishell_0817',
    'aishell_0851',
    'aishell_0863',
    'aishell_0871',
    'aishell_0887',
    'aishell_0913',
    'aishell_0915',
    'aishell_0919',
    'aishell_0935',
    'aishell_0966',
    'aishell_0987',
    'aishell_1008',
    'aishell_1020',
    'aishell_1024',
    'aishell_1050',
    'aishell_1055',
    'aishell_1056',
    'aishell_1064',
    'aishell_1072',
    'aishell_1091',
    'aishell_1096',
    'aishell_1100',
    'aishell_1108',
    'aishell_1115',
    'aishell_1125',
    'aishell_1131',
    'aishell_1136',
    'aishell_1138',
    'aishell_1161',
    'aishell_1203',
    'aishell_1204',
    'aishell_1218',
    'aishell_1221',
    'aishell_1253',
    'aishell_1320',
    'aishell_1341',
    'aishell_1366',
    'aishell_1377',
    'aishell_1383',
    'aishell_1385',
    'aishell_1392',
    'aishell_1393',
    'aishell_1408',
    'aishell_1431',
    'aishell_1437',
    'aishell_1448',
    'aishell_1555',
    'aishell_1563',
    'aishell_1567',
    'aishell_1575',
    'aishell_1585',
    'aishell_1593',
    'aishell_1607',
    'aishell_1624',
    'aishell_1625',
    'aishell_1630',
    'aishell_1650',
    'aishell_1670',
    'aishell_1684',
    'aishell_1686',
    'aishell_1699',
    'aishell_1711',
    'aishell_1759',
    'aishell_1806',
    'aishell_1828',
    'aishell_1831',
    'aishell_1832',
    'aishell_1837',
    'aishell_1846',
    'aishell_1863',
    'aishell_1878',
    'aishell_1891',
    'aishell_1918',
    'aishell_1935',
    'aishell_1939',
    'aishell_1956'
]


class SpeakerManager():
    def __init__(self, dataset_config:Coqpit):
        datasets = dataset_config.datasets
        dataset_speakers = {
            "vctk": VCTK_speaker_names,
            "libritts": LibriTTS_speaker_names,
            "cmlpt": CMLPT_speaker_names,
            "baker": BAKER_speaker_names,
            "kokoro": KOKORO_speaker_names,
            "ljspeech": LJS_speaker_names,
            "aishell": AISHELL_speaker_names
        }

        self.dataset_names = [dataset.dataset_name for dataset in datasets]
        self.dataset_names.sort()
        idx = 0
        self.speaker_ids_map = {}
        for name in self.dataset_names:
            speaker_names = dataset_speakers.get(name, [])
            for speaker_name in speaker_names:
                idx += 1
                self.speaker_ids_map[speaker_name] = idx

    def get_speaker_id(self, name):
        return self.speaker_ids_map.get(name, 0)

    def speaker_count(self):
        return len(self.speaker_ids_map) + 1

